{
  "canisters": {
    "blockx_backend": {
      "type": "rust",
      "candid": "backend/src/blockx_rust.did",
      "package": "blockx",
      "declarations": {
        "bindings": ["js", "did"],
        "node_compatibility": true,
        "output": "declarations/blockx_backend"
      },
      "build": [
	"cargo build --target wasm32-unknown-unknown --release -p blockx",
	"candid-extractor target/wasm32-unknown-unknown/release/blockx.wasm > backend/src/blockx_rust.did"
      ]
    },
    "blockx_frontend": {
      "build": [
        "cd frontend && npm i --include=dev && npm run build && cd - && rm -r public > /dev/null 2>&1; cp -r frontend/dist ./public"
      ],
      "frontend": {
        "entrypoint": "public/index.html"
      },
      "source": ["public/"],
      "type": "assets",
      "output_env_file": "frontend/.env"
    }
  },
  "networks": {
    "local": {
      "bind": "localhost:8000",
      "type": "ephemeral"
    }
  },
  "output_env_file": ".env"
}
